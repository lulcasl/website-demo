<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plano de Curso Power BI: De Analista para Analista</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #F8F9FA; color: #1F2937; }
        .tab-active { border-bottom: 2px solid #F59E0B; color: #F59E0B; font-weight: 600; }
        .tab-inactive { color: #6B7280; }
        .tab-inactive:hover { color: #F59E0B; }
        .card-shadow { box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06); }
        
        /* Chart Container Styling */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }

        /* Custom Star Schema CSS Visualization */
        .schema-container { display: flex; justify-content: center; align-items: center; position: relative; height: 300px; }
        .fact-table { z-index: 10; background: #FDE68A; border: 2px solid #D97706; padding: 1rem; border-radius: 8px; text-align: center; font-weight: bold; width: 120px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); cursor: pointer; transition: transform 0.2s; }
        .fact-table:hover { transform: scale(1.05); }
        .dim-table { position: absolute; background: #DBEAFE; border: 2px solid #2563EB; padding: 0.5rem; border-radius: 6px; text-align: center; font-size: 0.875rem; width: 100px; cursor: pointer; transition: all 0.2s; }
        .dim-table:hover { background: #BFDBFE; }
        .dim-top { top: 20px; }
        .dim-right { right: 20px; }
        .dim-bottom { bottom: 20px; }
        .dim-left { left: 20px; }
        .connector { position: absolute; background: #9CA3AF; z-index: 1; }
        .conn-vert { width: 2px; height: 100px; }
        .conn-horz { height: 2px; width: 100px; }

        /* Smooth fade for content changes */
        .fade-in { animation: fadeIn 0.3s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(5px); } to { opacity: 1; transform: translateY(0); } }
    </style>
    <!-- Chosen Palette: Warm Neutral (Slate/Gray) with Amber/Orange Accents for Power BI branding feel -->
    <!-- Application Structure Plan: Dashboard style. Updated to use external PLACEHOLDER URLs for file downloads. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
</head>
<body class="min-h-screen flex flex-col">

    <!-- Header -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <span class="text-2xl font-bold text-gray-800 tracking-tight">Power BI <span class="text-yellow-500">Essential</span></span>
                    <span class="ml-4 px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600 hidden sm:block">Curso para Analistas de Neg√≥cio</span>
                </div>
                <div class="text-sm text-gray-500">Plano de Ensino: 4 Aulas</div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full grid grid-cols-1 lg:grid-cols-12 gap-8">

        <!-- Sidebar / Navigation -->
        <aside class="lg:col-span-3 space-y-6">
            
            <!-- Navigation Menu -->
            <nav class="bg-white rounded-lg card-shadow p-4">
                <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-4">M√≥dulos do Curso</h3>
                <ul class="space-y-2">
                    <li>
                        <button onclick="loadClass(1)" id="nav-btn-1" class="w-full text-left px-4 py-2 rounded-md text-sm font-medium transition-colors bg-yellow-50 text-yellow-700 border-l-4 border-yellow-500">
                            Aula 1: Fundamentos & ETL
                        </button>
                    </li>
                    <li>
                        <button onclick="loadClass(2)" id="nav-btn-2" class="w-full text-left px-4 py-2 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">
                            Aula 2: Modelagem de Dados
                        </button>
                    </li>
                    <li>
                        <button onclick="loadClass(3)" id="nav-btn-3" class="w-full text-left px-4 py-2 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">
                            Aula 3: Visualiza√ß√£o & Design
                        </button>
                    </li>
                    <li>
                        <button onclick="loadClass(4)" id="nav-btn-4" class="w-full text-left px-4 py-2 rounded-md text-sm font-medium text-gray-600 hover:bg-gray-50 hover:text-gray-900 transition-colors">
                            Aula 4: Publica√ß√£o & Servi√ßo
                        </button>
                    </li>
                </ul>
            </nav>

            <!-- Skill Matrix Chart -->
            <div class="bg-white rounded-lg card-shadow p-4">
                <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-4">Compet√™ncias Alvo</h3>
                <div class="chart-container h-64">
                    <canvas id="skillsChart"></canvas>
                </div>
                <p class="text-xs text-gray-500 mt-2 text-center">Foco em autonomia para an√°lise de neg√≥cios.</p>
            </div>
        </aside>

        <!-- Main Content Area -->
        <section class="lg:col-span-9 space-y-6">
            
            <!-- Dynamic Class Header -->
            <div id="class-header" class="bg-white rounded-lg card-shadow p-6 border-l-4 border-yellow-500 fade-in">
                <div class="flex justify-between items-start">
                    <div>
                        <h1 id="class-title" class="text-2xl font-bold text-gray-900">Aula 1: Introdu√ß√£o e ETL (Power Query)</h1>
                        <p id="class-subtitle" class="mt-2 text-gray-600">O primeiro passo: conectando e limpando dados brutos.</p>
                    </div>
                    <span id="class-duration" class="px-3 py-1 bg-gray-100 rounded text-sm font-semibold text-gray-600">2 Horas</span>
                </div>
            </div>

            <!-- Tabs for Content View -->
            <div class="border-b border-gray-200">
                <nav class="-mb-px flex space-x-8" aria-label="Tabs">
                    <button onclick="switchContentTab('plan')" id="tab-plan" class="tab-active whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                        Plano de Aula
                    </button>
                    <button onclick="switchContentTab('concept')" id="tab-concept" class="tab-inactive whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                        Conceito Chave
                    </button>
                    <button onclick="switchContentTab('cases')" id="tab-cases" class="tab-inactive whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm">
                        Exerc√≠cios & Bases
                    </button>
                </nav>
            </div>

            <!-- Tab Content: Lesson Plan -->
            <div id="content-plan" class="bg-white rounded-lg card-shadow p-6 fade-in block">
                <h2 class="text-lg font-semibold text-gray-800 mb-4">Roteiro Detalhado</h2>
                <div class="space-y-6 relative border-l-2 border-gray-200 ml-3 pl-8 pb-4" id="timeline-container">
                    <!-- Dynamic Timeline Items -->
                </div>
            </div>

            <!-- Tab Content: Key Concepts -->
            <div id="content-concept" class="bg-white rounded-lg card-shadow p-6 fade-in hidden">
                <h2 class="text-lg font-semibold text-gray-800 mb-4">Conceito Interativo: <span id="concept-title">O Processo ETL</span></h2>
                <p id="concept-desc" class="text-gray-600 mb-6">Entenda visualmente como os dados fluem.</p>
                
                <!-- Dynamic Interactive Visual Container -->
                <div id="interactive-visual" class="bg-gray-50 rounded border border-gray-200 p-8 flex justify-center items-center min-h-[350px]">
                    <!-- Injected via JS -->
                </div>
            </div>

            <!-- Tab Content: Cases (Homework) -->
            <div id="content-cases" class="bg-white rounded-lg card-shadow p-6 fade-in hidden">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-lg font-semibold text-gray-800">Tarefas e Datasets</h2>
                    <div class="flex space-x-2">
                        <button onclick="loadCase(0)" class="px-3 py-1 text-sm rounded bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium transition-colors border border-gray-300">Case A</button>
                        <button onclick="loadCase(1)" class="px-3 py-1 text-sm rounded bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium transition-colors border border-gray-300">Case B</button>
                        <button onclick="loadCase(2)" class="px-3 py-1 text-sm rounded bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium transition-colors border border-gray-300">Case C</button>
                    </div>
                </div>

                <div id="case-detail" class="bg-gray-50 rounded-lg p-6 border border-gray-200">
                    <div class="flex items-center justify-between mb-2">
                        <h3 id="case-title" class="text-xl font-bold text-gray-900">Carregando...</h3>
                        <span id="case-difficulty" class="px-2 py-0.5 rounded text-xs font-semibold bg-green-100 text-green-800">F√°cil</span>
                    </div>
                    <span id="case-focus" class="inline-block mb-4 px-2 py-0.5 rounded text-xs font-semibold bg-blue-100 text-blue-800">Tratamento de Dados</span>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Left: Scenario -->
                        <div class="prose prose-sm text-gray-600 max-w-none">
                            <h4 class="font-bold text-gray-800">Cen√°rio</h4>
                            <p id="case-scenario" class="mb-4">Descri√ß√£o do cen√°rio...</p>

                            <h4 class="font-bold text-gray-800 mt-4">Entreg√°veis Esperados</h4>
                            <ul id="case-deliverables" class="list-disc pl-5 space-y-1">
                                <li>Item 1</li>
                            </ul>
                        </div>

                        <!-- Right: Downloads -->
                        <div class="bg-white p-4 rounded border border-gray-200 shadow-sm">
                            <h4 class="font-bold text-gray-800 mb-3 flex items-center">
                                <span>üìÇ Arquivos da Aula</span>
                                <span class="ml-2 text-xs font-normal text-gray-500 bg-yellow-100 text-yellow-800 px-2 py-1 rounded">Download Externo</span>
                            </h4>
                            <p class="text-xs text-gray-500 mb-4">Clique nos bot√µes abaixo para acessar os arquivos base hospedados no servidor.</p>
                            
                            <div id="file-downloads-container" class="space-y-3">
                                <!-- Buttons injected via JS -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white mt-auto py-8">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="text-sm text-gray-400">Plano de Curso Power BI ‚Ä¢ Arquivos Hospedados Externamente</p>
        </div>
    </footer>

    <!-- Application Logic -->
    <script>
        
        // ====================================================================================
        // --- CONFIGURA√á√ÉO DE LINKS (LINKS PLACEHOLDER) ---
        // EDITE AS PROPRIEDADES 'url' ABAIXO PARA APONTAR PARA SEUS PR√ìPRIOS ARQUIVOS HOSPEDADOS
        // ====================================================================================

        const courseData = {
            1: {
                title: "Aula 1: Introdu√ß√£o e ETL (Power Query)",
                subtitle: "Conectando e transformando dados brutos em informa√ß√µes √∫teis.",
                timeline: [
                    { time: "00:00 - 00:30", title: "Introdu√ß√£o ao BI e Interface", desc: "O que √© BI? Power BI Desktop vs Service. Tour pela interface." },
                    { time: "00:30 - 01:15", title: "Power Query: O Cora√ß√£o (ETL)", desc: "Extra√ß√£o (Excel, CSV, Web). Transforma√ß√£o: Tipos de dados, Promover cabe√ßalhos, Remover linhas." },
                    { time: "01:15 - 01:45", title: "Tratamento Avan√ßado", desc: "Coluna condicional, Coluna de exemplo, Unpivot, Tratamento de erros." },
                    { time: "01:45 - 02:00", title: "Carregamento e Pr√°tica", desc: "Aplicar e Fechar. Verifica√ß√£o dos dados no 'Data View'. D√∫vidas." }
                ],
                concept: { title: "O Fluxo ETL", type: "etl", desc: "Extra√ß√£o (Extract), Transforma√ß√£o (Transform) e Carga (Load)." },
                cases: [
                    {
                        title: "Case A: Limpeza de Vendas Desestruturadas",
                        difficulty: "Iniciante",
                        focus: "Limpeza B√°sica",
                        scenario: "Arquivo exportado de sistema antigo com metadados in√∫teis no cabe√ßalho e linhas vazias.",
                        deliverables: ["Remover linhas de cabe√ßalho in√∫til", "Promover cabe√ßalhos", "Remover nulos", "Tipagem de dados"],
                        files: [
                            // --- EDITE O LINK ABAIXO ---
                            { name: "Vendas_Jan_Sujo.csv", url: "https://github.com/lulcasl/website-demo/raw/refs/heads/main/Exerc%C3%ADcios%20Aula%201/Nivel%201/dirty_cafe_sales.csv" }
                        ]
                    },
                    {
                        title: "Case B: Unifica√ß√£o de Arquivos (Append)",
                        difficulty: "Intermedi√°rio",
                        focus: "Append (Acrescentar)",
                        scenario: "Unificar 3 arquivos mensais separados (Jan, Fev, Mar) em uma √∫nica tabela hist√≥rica.",
                        deliverables: ["Importar arquivos", "Usar 'Append Queries'", "Verificar total de linhas"],
                        files: [
                            // --- EDITE OS LINKS ABAIXO ---
                            { name: "Vendas_Jan.csv", url: "https://seusite.com/arquivos/aula1/Vendas_Jan.csv" },
                            { name: "Vendas_Fev.csv", url: "https://seusite.com/arquivos/aula1/Vendas_Fev.csv" },
                            { name: "Vendas_Mar.csv", url: "https://seusite.com/arquivos/aula1/Vendas_Mar.csv" }
                        ]
                    },
                    {
                        title: "Case C: Normaliza√ß√£o (Unpivot)",
                        difficulty: "Desafiador",
                        focus: "Unpivot (Desdinamizar)",
                        scenario: "Pesquisa de RH com colunas de meses (formato largo). Transformar para formato tabular.",
                        deliverables: ["Importar tabela", "Aplicar Unpivot nas colunas de data", "Renomear Atributo/Valor"],
                        files: [
                            // --- EDITE O LINK ABAIXO ---
                            { name: "Pesquisa_Clima_RH.csv", url: "https://seusite.com/arquivos/aula1/Pesquisa_Clima_RH.csv" }
                        ]
                    }
                ]
            },
            2: {
                title: "Aula 2: Modelagem de Dados",
                subtitle: "O segredo da performance: Relacionamentos e Star Schema.",
                timeline: [
                    { time: "00:00 - 00:40", title: "Conceito de Modelagem", desc: "Tabelas Fato vs Dimens√£o. Star Schema." },
                    { time: "00:40 - 01:10", title: "Relacionamentos", desc: "Cardinalidade (1:*, *:1). Dire√ß√£o do filtro." },
                    { time: "01:10 - 01:40", title: "Introdu√ß√£o ao DAX", desc: "Medidas vs Colunas. Fun√ß√µes: SUM, AVERAGE, RELATED." },
                    { time: "01:40 - 02:00", title: "Tabela Calend√°rio", desc: "Criando uma tabela calend√°rio simples com DAX." }
                ],
                concept: { title: "Star Schema", type: "star", desc: "Fato central cercada por Dimens√µes." },
                cases: [
                    {
                        title: "Case A: Construindo o Star Schema",
                        difficulty: "Essencial",
                        focus: "Modelagem",
                        scenario: "Vendas registradas apenas com IDs. Conectar com tabelas de Produto e Cliente.",
                        deliverables: ["Carregar tabelas", "Criar relacionamentos (1:*)", "Validar filtro cruzado"],
                        files: [
                            // --- EDITE OS LINKS ABAIXO ---
                            { name: "fVendas.csv", url: "https://seusite.com/arquivos/aula2/fVendas.csv" },
                            { name: "dProdutos.csv", url: "https://seusite.com/arquivos/aula2/dProdutos.csv" },
                            { name: "dClientes.csv", url: "https://seusite.com/arquivos/aula2/dClientes.csv" }
                        ]
                    },
                    {
                        title: "Case B: DAX B√°sico e Medidas",
                        difficulty: "Intermedi√°rio",
                        focus: "Medidas DAX",
                        scenario: "Calcular Faturamento e Ticket M√©dio via medidas expl√≠citas.",
                        deliverables: ["Medida Faturamento (SUMX)", "Medida Qtd Vendas (COUNTROWS)", "Ticket M√©dio (DIVIDE)"],
                        files: [
                             { name: "Base_Completa_Aula2.zip", url: "https://seusite.com/arquivos/aula2/Base_Completa.zip" }
                        ]
                    },
                    {
                        title: "Case C: Intelig√™ncia de Tempo",
                        difficulty: "Avan√ßado",
                        focus: "dCalendario",
                        scenario: "Compara√ß√£o MoM (Month over Month) exigindo tabela calend√°rio.",
                        deliverables: ["Criar dCalendario (DAX)", "Relacionar com Fato", "Medida CALCULATE PREVIOUSMONTH"],
                        files: [
                            { name: "fVendas_Historico.csv", url: "https://seusite.com/arquivos/aula2/fVendas_Historico.csv" }
                        ]
                    }
                ]
            },
            3: {
                title: "Aula 3: Visualiza√ß√£o & Storytelling",
                subtitle: "Transformando n√∫meros em insights visuais impactantes.",
                timeline: [
                    { time: "00:00 - 00:30", title: "Princ√≠pios de Visualiza√ß√£o", desc: "Escolha de gr√°ficos. Cores e contraste." },
                    { time: "00:30 - 01:15", title: "Visuais Nativos", desc: "Matrizes, Mapas, Barras. Formata√ß√£o condicional." },
                    { time: "01:15 - 01:45", title: "Interatividade", desc: "Filtros, Slicers, Drill-down e Tooltips." },
                    { time: "01:45 - 02:00", title: "Design e Layout", desc: "Menu de navega√ß√£o, bot√µes, alinhamento." }
                ],
                concept: { title: "Escolha do Gr√°fico", type: "viz", desc: "Categorias: Compara√ß√£o, Evolu√ß√£o, Composi√ß√£o, Distribui√ß√£o." },
                cases: [
                    {
                        title: "Case A: O Dashboard Executivo",
                        difficulty: "Intermedi√°rio",
                        focus: "KPIs e Layout",
                        scenario: "Criar tela executiva clara e r√°pida de ler.",
                        deliverables: ["Cart√µes (BANs)", "Gr√°fico de Tend√™ncia", "Top 5 Produtos", "Filtros de Ano/Estado"],
                        files: [
                            // --- EDITE O LINK ABAIXO ---
                            { name: "Dataset_Consolidado.csv", url: "https://seusite.com/arquivos/aula3/Dataset_Consolidado.csv" }
                        ]
                    },
                    {
                        title: "Case B: Formata√ß√£o Condicional",
                        difficulty: "F√°cil",
                        focus: "Tabelas",
                        scenario: "Relat√≥rio operacional com alertas visuais.",
                        deliverables: ["Matriz detalhada", "Barra de dados em valores", "√çcones de alerta em KPI negativo"],
                        files: [
                            { name: "Dataset_Operacional.csv", url: "https://seusite.com/arquivos/aula3/Dataset_Operacional.csv" }
                        ]
                    },
                    {
                        title: "Case C: Tooltips Personalizados",
                        difficulty: "Avan√ßado",
                        focus: "UX",
                        scenario: "Mostrar detalhes ao passar o mouse sobre o mapa.",
                        deliverables: ["P√°gina de Tooltip", "Configurar visual do mapa", "Testar intera√ß√£o"],
                        files: [
                            { name: "Dataset_Mapa.csv", url: "https://seusite.com/arquivos/aula3/Dataset_Mapa.csv" }
                        ]
                    }
                ]
            },
            4: {
                title: "Aula 4: Publica√ß√£o & Servi√ßo (Online)",
                subtitle: "Compartilhando seu trabalho com seguran√ßa e automa√ß√£o.",
                timeline: [
                    { time: "00:00 - 00:30", title: "Power BI Servi√ßo", desc: "Workspaces, Publica√ß√£o, Portal Online." },
                    { time: "00:30 - 01:00", title: "Dashboards vs Relat√≥rios", desc: "Pinning, Alertas de dados." },
                    { time: "01:00 - 01:30", title: "Atualiza√ß√£o", desc: "Gateway, Agendamento (Refresh)." },
                    { time: "01:30 - 02:00", title: "Seguran√ßa", desc: "RLS (Row Level Security), Compartilhamento." }
                ],
                concept: { title: "Fluxo de Publica√ß√£o", type: "publish", desc: "Desktop -> Nuvem -> Usu√°rio Final." },
                cases: [
                    {
                        title: "Case A: Layout Mobile",
                        difficulty: "F√°cil",
                        focus: "Mobile",
                        scenario: "Otimizar relat√≥rio para visualiza√ß√£o em celular.",
                        deliverables: ["Configurar Layout M√≥vel", "Selecionar visuais chave", "Publicar e testar"],
                        files: [
                            // --- EDITE O LINK ABAIXO ---
                            { name: "Projeto_Final.pbix", url: "https://seusite.com/arquivos/aula4/Projeto_Final.pbix" }
                        ]
                    },
                    {
                        title: "Case B: Seguran√ßa (RLS)",
                        difficulty: "Avan√ßado",
                        focus: "RLS",
                        scenario: "Restringir acesso a dados por regi√£o do gerente.",
                        deliverables: ["Criar Roles no Desktop", "DAX Filter", "Validar no Servi√ßo"],
                        files: [
                            { name: "Vendas_Nacional.csv", url: "https://seusite.com/arquivos/aula4/Vendas_Nacional.csv" }
                        ]
                    },
                    {
                        title: "Case C: Alertas de Dados",
                        difficulty: "F√°cil",
                        focus: "Alertas",
                        scenario: "Receber email se venda cair abaixo da meta.",
                        deliverables: ["Criar Dashboard no Servi√ßo", "Fixar Cart√£o", "Configurar Alerta"],
                        files: [
                            { name: "Dados_Alertas.csv", url: "https://seusite.com/arquivos/aula4/Dados_Alertas.csv" }
                        ]
                    }
                ]
            }
        };

        // --- CHART JS SETUP ---
        let skillsChartInstance = null;

        function initChart() {
            const ctx = document.getElementById('skillsChart').getContext('2d');
            skillsChartInstance = new Chart(ctx, {
                type: 'radar',
                data: {
                    labels: ['ETL / Dados', 'Modelagem', 'DAX', 'Design / Visual', 'Storytelling', 'Publica√ß√£o'],
                    datasets: [{
                        label: 'N√≠vel Alvo do Aluno',
                        data: [20, 20, 10, 20, 10, 10], 
                        fill: true,
                        backgroundColor: 'rgba(245, 158, 11, 0.2)',
                        borderColor: 'rgb(245, 158, 11)',
                        pointBackgroundColor: 'rgb(245, 158, 11)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgb(245, 158, 11)'
                    }]
                },
                options: {
                    maintainAspectRatio: false,
                    responsive: true,
                    elements: { line: { tension: 0.3 } },
                    scales: {
                        r: {
                            angleLines: { display: true },
                            suggestedMin: 0,
                            suggestedMax: 100,
                            ticks: { display: false }
                        }
                    },
                    plugins: {
                        legend: { display: false }
                    }
                }
            });
        }

        // --- DOM MANIPULATION ---

        let currentClassId = 1;
        let currentCaseIndex = 0;

        function loadClass(classId) {
            currentClassId = classId;
            const data = courseData[classId];

            // Update Active Nav Style
            document.querySelectorAll('nav button[id^="nav-btn-"]').forEach(btn => {
                btn.classList.remove('bg-yellow-50', 'text-yellow-700', 'border-l-4', 'border-yellow-500');
                btn.classList.add('text-gray-600', 'hover:bg-gray-50');
            });
            const activeBtn = document.getElementById(`nav-btn-${classId}`);
            activeBtn.classList.remove('text-gray-600', 'hover:bg-gray-50');
            activeBtn.classList.add('bg-yellow-50', 'text-yellow-700', 'border-l-4', 'border-yellow-500');

            // Update Header
            document.getElementById('class-title').innerText = data.title;
            document.getElementById('class-subtitle').innerText = data.subtitle;

            // Update Timeline (Plan)
            const timelineContainer = document.getElementById('timeline-container');
            timelineContainer.innerHTML = '';
            data.timeline.forEach(item => {
                timelineContainer.innerHTML += `
                    <div class="relative mb-6">
                        <div class="absolute -left-10 mt-1.5 h-4 w-4 rounded-full border-2 border-yellow-500 bg-white"></div>
                        <time class="mb-1 text-sm font-normal leading-none text-gray-400">${item.time}</time>
                        <h3 class="text-base font-semibold text-gray-900">${item.title}</h3>
                        <p class="mb-4 text-sm font-normal text-gray-500">${item.desc}</p>
                    </div>
                `;
            });

            // Update Concept
            document.getElementById('concept-title').innerText = data.concept.title;
            document.getElementById('concept-desc').innerText = data.concept.desc;
            renderConceptVisual(data.concept.type);

            // Update Cases
            loadCase(0);
            
            // Update Chart
            updateChartForClass(classId);

            // Reset tab
            switchContentTab('plan');
        }

        function loadCase(index) {
            currentCaseIndex = index;
            const caseData = courseData[currentClassId].cases[index];

            document.getElementById('case-title').innerText = caseData.title;
            document.getElementById('case-difficulty').innerText = caseData.difficulty;
            document.getElementById('case-focus').innerText = caseData.focus;
            document.getElementById('case-scenario').innerText = caseData.scenario;
            
            const delivList = document.getElementById('case-deliverables');
            delivList.innerHTML = '';
            caseData.deliverables.forEach(item => {
                delivList.innerHTML += `<li>${item}</li>`;
            });

            // GENERATE DOWNLOAD BUTTONS (LINKS)
            const filesContainer = document.getElementById('file-downloads-container');
            filesContainer.innerHTML = '';
            
            if (caseData.files && caseData.files.length > 0) {
                caseData.files.forEach(file => {
                    // Create Anchor link styled as button
                    const link = document.createElement('a');
                    link.className = "w-full flex items-center justify-between px-4 py-2 bg-white hover:bg-yellow-50 border border-gray-300 hover:border-yellow-400 rounded transition-all group no-underline";
                    link.href = file.url;
                    link.target = "_blank"; // Open in new tab/start download
                    
                    link.innerHTML = `
                        <div class="flex items-center">
                            <span class="text-xl mr-3 group-hover:scale-110 transition-transform">üìÑ</span>
                            <div class="text-left">
                                <div class="text-sm font-semibold text-gray-700 group-hover:text-yellow-700">${file.name}</div>
                                <div class="text-[10px] text-gray-400">Clique para baixar</div>
                            </div>
                        </div>
                        <span class="text-gray-400 group-hover:text-yellow-600">üîó</span>
                    `;
                    filesContainer.appendChild(link);
                });
            } else {
                 filesContainer.innerHTML = `<div class="text-xs text-gray-400 italic">Nenhum arquivo necess√°rio para este case.</div>`;
            }
        }

        function switchContentTab(tabName) {
            ['plan', 'concept', 'cases'].forEach(t => {
                document.getElementById(`content-${t}`).classList.add('hidden');
                document.getElementById(`content-${t}`).classList.remove('block');
                const tabBtn = document.getElementById(`tab-${t}`);
                tabBtn.classList.remove('tab-active');
                tabBtn.classList.add('tab-inactive', 'border-transparent');
            });
            document.getElementById(`content-${tabName}`).classList.remove('hidden');
            document.getElementById(`content-${tabName}`).classList.add('block');
            const activeBtn = document.getElementById(`tab-${tabName}`);
            activeBtn.classList.remove('tab-inactive', 'border-transparent');
            activeBtn.classList.add('tab-active');
        }

        function updateChartForClass(id) {
            let data = [0,0,0,0,0,0];
            if (id >= 1) { data[0] += 80; data[1] += 20; }
            if (id >= 2) { data[1] += 70; data[2] += 60; }
            if (id >= 3) { data[3] += 90; data[4] += 70; }
            if (id >= 4) { data[5] += 90; }
            skillsChartInstance.data.datasets[0].data = data;
            skillsChartInstance.update();
        }

        function renderConceptVisual(type) {
            const container = document.getElementById('interactive-visual');
            container.innerHTML = ''; 

            if (type === 'star') {
                container.innerHTML = `
                    <div class="schema-container w-full">
                        <div class="dim-table dim-top" title="Dimens√£o Tempo">dCalendario</div>
                        <div class="dim-table dim-left" title="Dimens√£o Produto">dProduto</div>
                        <div class="connector conn-vert" style="top: 50px;"></div>
                        <div class="connector conn-horz" style="left: 120px;"></div>
                        <div class="fact-table" title="Tabela Fato: Cont√©m n√∫meros">fVendas</div>
                        <div class="connector conn-horz" style="right: 120px;"></div>
                        <div class="connector conn-vert" style="bottom: 50px;"></div>
                        <div class="dim-table dim-right" title="Dimens√£o Cliente">dCliente</div>
                        <div class="dim-table dim-bottom" title="Dimens√£o Loja">dLoja</div>
                    </div>`;
            } else if (type === 'etl') {
                container.innerHTML = `
                    <div class="flex items-center space-x-4">
                        <div class="p-4 bg-red-100 rounded text-center border border-red-300 w-24"><div class="text-2xl mb-1">üìÇ</div><div class="font-bold text-xs text-red-800">Origem</div></div>
                        <div class="text-gray-400 font-bold text-xl">‚Üí</div>
                        <div class="p-4 bg-yellow-100 rounded text-center border border-yellow-300 w-32 shadow-lg scale-110"><div class="text-2xl mb-1">‚öôÔ∏è</div><div class="font-bold text-xs text-yellow-800">Power Query</div></div>
                        <div class="text-gray-400 font-bold text-xl">‚Üí</div>
                        <div class="p-4 bg-blue-100 rounded text-center border border-blue-300 w-24"><div class="text-2xl mb-1">üìä</div><div class="font-bold text-xs text-blue-800">Power BI</div></div>
                    </div>`;
            } else if (type === 'viz') {
                 container.innerHTML = `
                    <div class="grid grid-cols-2 gap-4 w-full max-w-md">
                        <div class="p-3 bg-white border rounded text-center hover:bg-gray-50"><p class="text-xs font-bold">üìä Compara√ß√£o</p></div>
                        <div class="p-3 bg-white border rounded text-center hover:bg-gray-50"><p class="text-xs font-bold">üìà Evolu√ß√£o</p></div>
                        <div class="p-3 bg-white border rounded text-center hover:bg-gray-50"><p class="text-xs font-bold">üç∞ Composi√ß√£o</p></div>
                        <div class="p-3 bg-white border rounded text-center hover:bg-gray-50"><p class="text-xs font-bold">üìç Distribui√ß√£o</p></div>
                    </div>`;
            } else {
                 container.innerHTML = `<div class="p-4 bg-gray-100 rounded text-gray-500 italic">Visualiza√ß√£o do fluxo de publica√ß√£o.</div>`;
            }
        }

        window.onload = function() {
            initChart();
            loadClass(1);
        };
    </script>
</body>
</html>